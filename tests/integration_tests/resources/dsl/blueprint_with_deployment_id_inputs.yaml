tosca_definitions_version: cloudify_dsl_1_3

imports:
  - cloudify/types/types.yaml

inputs:
  a_deployment_id:
    type: deployment_id
    constraints:
      - filter_id: test-filter
  b_deployment_id:
    type: deployment_id
    constraints:
      - labels:
          - foo: bar
          - lorem: ipsum
      - name_pattern:
          starts_with: d
          contains: deployment
  c_deployment_id:
    type: deployment_id
    constraints:
      - tenants:
          - other_tenant
  d_deployment_id:
    type: deployment_id
    constraints:
      - name_pattern:
          starts_with: d
          contains: deployment

node_types:
  mock_type:
    properties:
      deployment_id:
        type: deployment_id
        required: true

node_templates:
  node_a:
    type: mock_type
    properties:
      deployment_id: { get_input: a_deployment_id }
  node_b:
    type: mock_type
    properties:
      deployment_id: { get_input: b_deployment_id }
  node_c:
    type: mock_type
    properties:
      deployment_id: { get_input: c_deployment_id }
  node_d:
    type: mock_type
    properties:
      deployment_id: { get_input: d_deployment_id }
