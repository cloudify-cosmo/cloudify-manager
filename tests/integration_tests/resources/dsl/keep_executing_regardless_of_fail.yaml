tosca_definitions_version: cloudify_dsl_1_4

imports:
    - cloudify/types/types.yaml
    - plugin:cloudmock

node_templates:
  node1:
    type: cloudify.nodes.Root
    interfaces:
      cloudify.interfaces.lifecycle:
        configure: cloudmock.cloudmock.tasks.failing

  node2:
    type: cloudify.nodes.Root
    interfaces:
      cloudify.interfaces.lifecycle:
        configure: cloudmock.cloudmock.tasks.mark_instance

  node3:
    type: cloudify.nodes.Root
    interfaces:
      cloudify.interfaces.lifecycle:
        configure: cloudmock.cloudmock.tasks.failing
    relationships:
      - type: cloudify.relationships.depends_on
        target: node2

  node4:
    type: cloudify.nodes.Root
    interfaces:
      cloudify.interfaces.lifecycle:
          configure: cloudmock.cloudmock.tasks.mark_instance
    relationships:
      - type: cloudify.relationships.depends_on
        target: node2
