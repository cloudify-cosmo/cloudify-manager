{
    "definitions": {

        "types": {
            "machine": {
                "derived_from": "node",
                "interfaces": [ "provisioner" ]
            },

            "database_server": {
                "derived_from": "node",
                "properties": {
                    "port": ""
                },
                "interfaces": [ "configurer" ]
            },

            "database": {
                "derived_from": "node",
                "properties": {
                    "name": "",
                    "schema_file": ""
                },
                "interfaces": [ "schema_configurer" ]
            }

        },

        "interfaces": {
            "provisioner": {
                "operations": [ "create", "start", "stop", "terminate" ]
            },
            "configurer": {
                "operations": [ "install", "start" ,"stop", "uninstall" ]
            },
            "schema_configurer": {
                "operations": [ "create", "delete" ]
            }
        },

        "artifacts": {
            "plugin": {
                "derived_from": "artifact"
            },
            "provisioner_plugin": {
                "derived_from": "plugin",
                "properties": {
                    "interface": "provisioner",
                    "url": "plugins/provisioner-plugin.zip"
                }
            },
            "configurer_plugin": {
                "derived_from": "plugin",
                "properties": {
                    "interface": "configurer",
                    "url": "plugins/configurer-plugin.zip"
                }
            },
            "schema_configurer_plugin": {
                "derived_from": "plugin",
                "properties": {
                    "interface": "schema_configurer",
                    "url": "plugins/schema-configurer-plugin.zip"
                }
            }
        },

        "relationships": {
            "deployed_on": { },
            "hosted_on": { }
        },

        "plans": {
            "machine": {
                "init": {
                    "radial": "define machine_init\n  execute_operation operation: 'create'\n  execute_operation operation: 'start'\n"
                }
            },
            "database_server": {
                "init": {
                    "radial": "define database_server_init\n  execute_operation operation: 'install'\n  execute_operation operation: 'start'\n"
                }
            },
            "database": {
                "init": {
                    "radial": "define database_init\n  execute_operation operation: 'create'\n"
                }
            }
        },

        "service_template": {

            "mysql_machine": {
                "derived_from": "machine",
                "properties": {
                    "image": "aws149180"
                }
            },

            "mysql_database_server": {
                "derived_from": "database_server",
                "properties": {
                    "port": "3306",
                    "chef_recipe": "mysql_chef_recipe"
                },
                "relationships": {
                    "hosted_on": "mysql_machine"
                }
            },

            "mysql_schema": {
                "derived_from": "database",
                "properties": {
                    "name": "petclinic"
                },
                "relationships": {
                    "deployed_on": "mysql_database_server"
                }
            }
        }
    }

}